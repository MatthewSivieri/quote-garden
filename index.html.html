<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quote Garden</title>
  <!--
  HOW TO USE THIS SINGLE-FILE SITE
  --------------------------------
  • This is a 100% static page. Host it anywhere (GitHub Pages, Netlify, a USB stick). No build tools.
  • All quotes live in the JSON block near the bottom: <script id="data" type="application/json">…</script>
  • To add a quote, paste another object into the array. Keep fields: id, text, author, source, url, date, categories [array of strings], tags [array].
  • Deep links: you can share filtered views, e.g. ?cat=warfare or ?q=freedom . Multiple cats allowed: ?cat=warfare,politics
  • Nothing you add in the browser is saved to the server. Edit the file and commit to your repo for permanent changes.
  • Optional: use GitHub Issues + a small script to export to JSON, or wire this into a static generator later.
  -->
  <style>
    :root {
      --bg: #0b0d10;
      --panel: #12161b;
      --muted: #8a97a6;
      --text: #e8edf2;
      --accent: #8fb3ff;
      --card: #141a21;
      --border: #212a35;
      --radius: 16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--text); font:16px/1.55 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{display:grid; grid-template-columns:280px 1fr; gap:20px; max-width:1200px; margin:0 auto; padding:24px}
    header{grid-column:1/-1; display:flex; gap:12px; align-items:center; justify-content:space-between}
    .title{font-size:22px; font-weight:700; letter-spacing:.2px}
    .search{flex:1; display:flex; gap:8px; align-items:center; margin-left:14px}
    .search input{flex:1; background:var(--panel); border:1px solid var(--border); color:var(--text); padding:12px 14px; border-radius:12px}
    .pill{display:inline-flex; align-items:center; gap:8px; padding:10px 12px; background:var(--panel); border:1px solid var(--border); border-radius:12px; color:var(--muted)}
    .sidebar{position:sticky; top:16px; align-self:start; background:var(--panel); border:1px solid var(--border); border-radius:var(--radius); padding:16px}
    .sidebar h3{margin:6px 0 10px; font-size:14px; color:var(--muted); text-transform:uppercase; letter-spacing:.12em}
    .catlist{display:flex; flex-wrap:wrap; gap:8px}
    .cat{border:1px solid var(--border); background:transparent; color:var(--text); padding:6px 10px; border-radius:999px; cursor:pointer}
    .cat.active{background:var(--accent); color:#0b1220; border-color:transparent}
    .content{display:grid; grid-template-columns:repeat(1,minmax(0,1fr)); gap:14px}
    @media (min-width: 860px){ .content{grid-template-columns:repeat(2,minmax(0,1fr));} }
    .card{background:var(--card); border:1px solid var(--border); border-radius:var(--radius); padding:16px; display:flex; flex-direction:column; gap:10px}
    .q{font-size:18px}
    .meta{display:flex; flex-wrap:wrap; gap:10px; color:var(--muted)}
    .badges{display:flex; gap:8px; flex-wrap:wrap}
    .badge{padding:4px 8px; border-radius:999px; background:#0e1823; border:1px solid var(--border); font-size:12px; color:var(--muted)}
    .toolbar{display:flex; gap:10px; flex-wrap:wrap}
    .btn{padding:8px 10px; border-radius:10px; border:1px solid var(--border); background:var(--panel); color:var(--text); cursor:pointer}
    .btn:hover{border-color:#334356}
    .muted{color:var(--muted)}
    .footer{grid-column:1/-1; color:var(--muted); text-align:center; padding:20px}
    .hr{height:1px; background:var(--border); margin:12px 0}
    .empty{opacity:.7; text-align:center; padding:24px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">Quote Garden</div>
      <div class="search">
        <input id="searchInput" type="search" placeholder="Search text, author, tags… (⌘/Ctrl+K)" aria-label="Search" />
        <button class="pill" id="clearFilters" title="Clear filters">Clear</button>
      </div>
      <div class="pill" id="count">0 quotes</div>
    </header>

    <aside class="sidebar" aria-label="Categories and tools">
      <h3>Categories</h3>
      <div class="catlist" id="catList"></div>
      <div class="hr"></div>
      <h3>Tools</h3>
      <div class="toolbar">
        <button class="btn" id="copyLink">Copy shareable link</button>
        <button class="btn" id="exportJson">Export JSON</button>
      </div>
      <p class="muted" style="margin-top:8px">Tip: Add quotes by editing this file’s JSON block and pushing to your repo.</p>
    </aside>

    <main class="content" id="cards" aria-live="polite"></main>

    <div class="footer muted">Static, durable, and yours. Host anywhere.</div>
  </div>

  <!-- Data store: edit this JSON to add or change quotes. -->
  <script id="data" type="application/json">{
    "quotes": [
      {
        "id": "thucydides-freedom-courage",
        "text": "The secret of happiness is freedom, and the secret of freedom is courage.",
        "author": "Thucydides",
        "source": "History of the Peloponnesian War (2.40)",
        "url": "https://www.perseus.tufts.edu/hopper/text?doc=Thuc.%202.40",
        "date": "-0429-01-01",
        "categories": ["warfare", "human nature"],
        "tags": ["Athens", "Pericles"]
      },
      {
        "id": "hobbes-bellum-omnium",
        "text": "During the time men live without a common Power to keep them all in awe, they are in that condition which is called War; and such a war, as is of every man, against every man.",
        "author": "Thomas Hobbes",
        "source": "Leviathan (ch. 13)",
        "url": "https://www.gutenberg.org/ebooks/3207",
        "date": "1651-01-01",
        "categories": ["human nature", "politics"],
        "tags": ["state of nature", "conflict"]
      },
      {
        "id": "oseille-pluralism",
        "text": "Certainty breeds coercion; pluralism preserves liberty.",
        "author": "Matthew (Thesis)",
        "source": "Personal notes",
        "url": "",
        "date": "2025-08-12",
        "categories": ["politics", "maxims"],
        "tags": ["pluralism", "liberty"]
      },
      {
        "id": "dahl-democracy",
        "text": "Democracy is a continuing experiment to find out how we can govern ourselves justly and effectively.",
        "author": "Robert A. Dahl",
        "source": "On Democracy",
        "url": "https://archive.org/details/ondemocracy",
        "date": "1998-01-01",
        "categories": ["politics"],
        "tags": ["democracy"]
      }
    ]
  }</script>

  <script>
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));

    const state = {
      q: new URLSearchParams(location.search).get('q') || '',
      cats: (new URLSearchParams(location.search).get('cat') || '').split(',').filter(Boolean)
    };

    const data = JSON.parse(document.getElementById('data').textContent);
    const quotes = data.quotes;

    const searchInput = document.getElementById('searchInput');
    const catList = document.getElementById('catList');
    const cards = document.getElementById('cards');
    const count = document.getElementById('count');

    // Build category pills
    const allCats = Array.from(new Set(quotes.flatMap(q => q.categories))).sort((a,b)=>a.localeCompare(b));
    function renderCats(){
      catList.innerHTML = '';
      const make = (name, active=false) => {
        const btn = document.createElement('button');
        btn.className = 'cat' + (active ? ' active' : '');
        btn.textContent = name;
        btn.onclick = () => toggleCat(name);
        return btn;
      };
      // "All" shortcut
      const allBtn = make('All', state.cats.length===0);
      allBtn.onclick = () => { state.cats = []; update(); };
      catList.append(allBtn);
      allCats.forEach(c => catList.append(make(c, state.cats.includes(c))));
    }

    function toggleCat(c){
      const i = state.cats.indexOf(c);
      if(i>-1) state.cats.splice(i,1); else state.cats.push(c);
      update();
    }

    function matches(q){
      const needle = state.q.trim().toLowerCase();
      const inCats = state.cats.length===0 || state.cats.every(c => q.categories.includes(c));
      if(!inCats) return false;
      if(!needle) return true;
      const hay = [q.text, q.author, q.source, ...(q.tags||[])].join(' ').toLowerCase();
      return hay.includes(needle);
    }

    function renderCards(list){
      if(list.length===0){ cards.innerHTML = `<div class="empty">No results. Try clearing filters.</div>`; return; }
      cards.innerHTML = list.map(q => `
        <article class="card" id="${q.id}">
          <div class="q">“${escapeHtml(q.text)}”</div>
          <div class="meta">
            <span>— <strong>${escapeHtml(q.author)}</strong></span>
            <span>· ${escapeHtml(q.source)}</span>
            ${q.url ? `<span>· <a href="${escapeAttr(q.url)}" target="_blank" rel="noopener">source</a></span>` : ''}
          </div>
          <div class="badges">${(q.categories||[]).map(c=>`<span class="badge">${escapeHtml(c)}</span>`).join('')} ${(q.tags||[]).map(t=>`<span class="badge">#${escapeHtml(t)}</span>`).join('')}</div>
        </article>
      `).join('');
    }

    function updateUrl(){
      const params = new URLSearchParams();
      if(state.q) params.set('q', state.q);
      if(state.cats.length) params.set('cat', state.cats.join(','));
      const newUrl = location.pathname + (params.toString()?`?${params}`:'');
      history.replaceState(null, '', newUrl);
    }

    function update(){
      const filtered = quotes.filter(matches).sort((a,b)=>{
        const ad = (a.date||'').toString();
        const bd = (b.date||'').toString();
        return bd.localeCompare(ad); // newest first
      });
      renderCats();
      renderCards(filtered);
      count.textContent = `${filtered.length} ${filtered.length===1?'quote':'quotes'}`;
      updateUrl();
    }

    // Controls
    searchInput.value = state.q;
    searchInput.addEventListener('input', e=>{ state.q = e.target.value; update(); });
    document.getElementById('clearFilters').onclick = ()=>{ state.q=''; state.cats=[]; searchInput.value=''; update(); };
    document.getElementById('copyLink').onclick = async ()=>{
      try { await navigator.clipboard.writeText(location.href); showToast('Link copied'); } catch { showToast('Copy failed'); }
    };
    document.getElementById('exportJson').onclick = ()=>{
      const blob = new Blob([JSON.stringify({quotes}, null, 2)], {type:'application/json'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'quotes.json';
      a.click();
      URL.revokeObjectURL(a.href);
    };

    // Keyboard quick open
    window.addEventListener('keydown', (e)=>{
      if((e.ctrlKey||e.metaKey) && e.key.toLowerCase()==='k'){ e.preventDefault(); searchInput.focus(); }
    });

    function showToast(msg){
      const t = document.createElement('div');
      t.textContent = msg; t.style.position='fixed'; t.style.bottom='18px'; t.style.left='50%'; t.style.transform='translateX(-50%)';
      t.style.background='var(--panel)'; t.style.border='1px solid var(--border)'; t.style.padding='10px 12px'; t.style.borderRadius='10px';
      t.style.boxShadow='0 6px 30px rgba(0,0,0,.35)'; t.style.zIndex='99';
      document.body.appendChild(t); setTimeout(()=>t.remove(), 1400);
    }

    function escapeHtml(s){ return String(s).replace(/[&<>"]g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','\"':'&quot;'}[c])); }
    function escapeAttr(s){ return String(s).replace(/"/g,'&quot;'); }

    // init
    renderCats();
    update();
  </script>
</body>
</html>
