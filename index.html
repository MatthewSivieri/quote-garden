<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quote Garden</title>
  <style>
    :root {
      --bg: #0b0d10;
      --panel: #12161b;
      --muted: #8a97a6;
      --text: #e8edf2;
      --accent: #8fb3ff;
      --card: #141a21;
      --border: #212a35;
      --radius: 16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:var(--bg); color:var(--text); font:16px/1.55 system-ui, sans-serif;
    }
    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{display:grid; grid-template-columns:280px 1fr; gap:20px; max-width:1200px; margin:0 auto; padding:24px}
    header{grid-column:1/-1; display:flex; gap:12px; align-items:center; justify-content:space-between}
    .title{font-size:22px; font-weight:700;}
    .search{flex:1; display:flex; gap:8px; align-items:center; margin-left:14px}
    .search input{flex:1; background:var(--panel); border:1px solid var(--border); color:var(--text); padding:12px 14px; border-radius:12px}
    .pill{padding:10px 12px; background:var(--panel); border:1px solid var(--border); border-radius:12px; color:var(--muted)}
    .sidebar{position:sticky; top:16px; align-self:start; background:var(--panel); border:1px solid var(--border); border-radius:var(--radius); padding:16px}
    .catlist{display:flex; flex-wrap:wrap; gap:8px}
    .cat{border:1px solid var(--border); background:transparent; color:var(--text); padding:6px 10px; border-radius:999px; cursor:pointer}
    .cat.active{background:var(--accent); color:#0b1220; border-color:transparent}
    .content{display:grid; grid-template-columns:repeat(1,minmax(0,1fr)); gap:14px}
    @media (min-width: 860px){ .content{grid-template-columns:repeat(2,minmax(0,1fr));} }
    .card{background:var(--card); border:1px solid var(--border); border-radius:var(--radius); padding:16px; display:flex; flex-direction:column; gap:10px}
    .q{font-size:18px}
    .meta{display:flex; flex-wrap:wrap; gap:10px; color:var(--muted)}
    .badges{display:flex; gap:8px; flex-wrap:wrap}
    .badge{padding:4px 8px; border-radius:999px; background:#0e1823; border:1px solid var(--border); font-size:12px; color:var(--muted)}
    .toolbar{display:flex; gap:10px; flex-wrap:wrap}
    .btn{padding:8px 10px; border-radius:10px; border:1px solid var(--border); background:var(--panel); color:var(--text); cursor:pointer}
    .footer{grid-column:1/-1; color:var(--muted); text-align:center; padding:20px}
    .hr{height:1px; background:var(--border); margin:12px 0}
    .empty{opacity:.7; text-align:center; padding:24px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">Quote Garden</div>
      <div class="search">
        <input id="searchInput" type="search" placeholder="Search..." />
        <button class="pill" id="clearFilters">Clear</button>
      </div>
      <div class="pill" id="count">0 quotes</div>
    </header>

    <aside class="sidebar">
      <h3>Categories</h3>
      <div class="catlist" id="catList"></div>
      <div class="hr"></div>
      <h3>Tools</h3>
      <div class="toolbar">
        <button class="btn" id="copyLink">Copy link</button>
        <button class="btn" id="exportJson">Export JSON</button>
      </div>
    </aside>

    <main class="content" id="cards"></main>

    <div class="footer">Static, durable, and yours.</div>
  </div>

  <script id="data" type="application/json">{
    "quotes": [
      {
        "id": "thucydides-freedom-courage",
        "text": "The secret of happiness is freedom, and the secret of freedom is courage.",
        "author": "Thucydides",
        "source": "History of the Peloponnesian War",
        "url": "https://www.perseus.tufts.edu/hopper/text?doc=Thuc.%202.40",
        "date": "-0429-01-01",
        "categories": ["warfare", "human nature"],
        "tags": ["Athens", "Pericles"]
      },
      {
        "id": "hobbes-war-all",
        "text": "During the time men live without a common Power to keep them all in awe, they are in that condition which is called War; and such a war, as is of every man, against every man.",
        "author": "Thomas Hobbes",
        "source": "Leviathan",
        "url": "https://www.gutenberg.org/ebooks/3207",
        "date": "1651-01-01",
        "categories": ["politics", "human nature"],
        "tags": ["state of nature", "conflict"]
      },
      {
        "id": "shakespeare-love",
        "text": "Love looks not with the eyes, but with the mind, and therefore is winged Cupid painted blind.",
        "author": "William Shakespeare",
        "source": "A Midsummer Night's Dream",
        "url": "https://shakespeare.folger.edu/",
        "date": "1595-01-01",
        "categories": ["love", "poetry"],
        "tags": ["Cupid"]
      },
      {
        "id": "owen-war",
        "text": "My friend, you would not tell with such high zest to children ardent for some desperate glory, the old Lie; Dulce et decorum est pro patria mori.",
        "author": "Wilfred Owen",
        "source": "Dulce et Decorum Est",
        "url": "https://www.poetryfoundation.org/poems/46560/dulce-et-decorum-est",
        "date": "1917-01-01",
        "categories": ["warfare", "poetry"],
        "tags": ["World War I"]
      },
      {
        "id": "matthew-thesis",
        "text": "Certainty breeds coercion; pluralism preserves liberty.",
        "author": "Matthew Sivieri",
        "source": "Personal notes",
        "url": "",
        "date": "2025-08-12",
        "categories": ["politics", "maxims"],
        "tags": ["pluralism", "liberty"]
      }
    ]
  }</script>

  <script>
    const state = { q: '', cats: [] };
    const quotes = JSON.parse(document.getElementById('data').textContent).quotes;
    const searchInput = document.getElementById('searchInput');
    const catList = document.getElementById('catList');
    const cards = document.getElementById('cards');
    const count = document.getElementById('count');

    function renderCats(){
      const allCats = Array.from(new Set(quotes.flatMap(q=>q.categories))).sort();
      catList.innerHTML = '';
      const make = (name, active=false) => {
        const btn = document.createElement('button');
        btn.className = 'cat' + (active ? ' active' : '');
        btn.textContent = name;
        btn.onclick = () => toggleCat(name);
        return btn;
      };
      catList.append(make('All', state.cats.length===0));
      allCats.forEach(c=>catList.append(make(c, state.cats.includes(c))));
    }

    function toggleCat(c){
      const i = state.cats.indexOf(c);
      if(i>-1) state.cats.splice(i,1); else state.cats.push(c);
      update();
    }

    function matches(q){
      const needle = state.q.trim().toLowerCase();
      const inCats = state.cats.length===0 || state.cats.every(c => q.categories.includes(c));
      if(!inCats) return false;
      if(!needle) return true;
      const hay = [q.text, q.author, q.source, ...(q.tags||[])].join(' ').toLowerCase();
      return hay.includes(needle);
    }

    function renderCards(list){
      if(list.length===0){ cards.innerHTML = `<div class="empty">No results.</div>`; return; }
      cards.innerHTML = list.map(q => `
        <article class="card">
          <div class="q">“${q.text}”</div>
          <div class="meta">— <strong>${q.author}</strong> · ${q.source} ${q.url ? `· <a href="${q.url}" target="_blank">source</a>`:''}</div>
          <div class="badges">${(q.categories||[]).map(c=>`<span class="badge">${c}</span>`).join('')} ${(q.tags||[]).map(t=>`<span class="badge">#${t}</span>`).join('')}</div>
        </article>
      `).join('');
    }

    function update(){
      const filtered = quotes.filter(matches);
      renderCats();
      renderCards(filtered);
      count.textContent = `${filtered.length} quotes`;
    }

    searchInput.addEventListener('input', e=>{ state.q = e.target.value; update(); });
    document.getElementById('clearFilters').onclick = ()=>{ state.q=''; state.cats=[]; searchInput.value=''; update(); };
    document.getElementById('copyLink').onclick = async ()=>{
      try { await navigator.clipboard.writeText(location.href); alert('Link copied'); } catch { alert('Copy failed'); }
    };
    document.getElementById('exportJson').onclick = ()=>{
      const blob = new Blob([JSON.stringify({quotes}, null, 2)], {type:'application/json'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'quotes.json';
      a.click();
      URL.revokeObjectURL(a.href);
    };

    update();
  </script>
</body>
</html>